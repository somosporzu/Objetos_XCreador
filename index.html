<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creador de Objetos PAPA</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel" src="data.js"></script>
    <script type="text/babel" src="app.js"></script>
</body>
</html>// Iconos SVG
const BookIcon = () => (
    <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
    </svg>
);

const Trash2Icon = () => (
    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
    </svg>
);

const DownloadIcon = () => (
    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
    </svg>
);

// Datos del sistema
const RARITIES = {
    'Poco Com√∫n': { min: 3, max: 5, price: '200-500 L' },
    'Raro': { min: 6, max: 10, price: '500-2,000 L' },
    'Muy Raro': { min: 11, max: 15, price: '2,000-10,000 L' },
    'Legendario': { min: 16, max: 25, price: 'Sin precio' }
};

const PROPERTIES = {
    'Bonificadores a Atributos': [
        { name: '+1 a un Atributo', cost: 3, note: 'M√°ximo +3 en un objeto' },
        { name: '+1 a dos Atributos', cost: 5, note: 'Muy raro' },
        { name: '+1 a los tres Atributos', cost: 8, note: 'Solo Legendario+' }
    ],
    'Bonificadores a Combate': [
        { name: '+1 a tiradas de ataque', cost: 2, note: 'Solo armas' },
        { name: '+1 al da√±o', cost: 2, note: 'Solo armas' },
        { name: '+1 a Defensa', cost: 2, note: 'Armaduras, escudos' },
        { name: '+1 a Iniciativa', cost: 2, note: 'Accesorios, armas ligeras' }
    ],
    'Bonificadores a Recursos': [
        { name: '+5 Resistencia m√°xima', cost: 1, note: 'Acumulable hasta +15' },
        { name: '+3 metros de movimiento', cost: 1, note: 'Acumulable hasta +9' },
        { name: '+1 Potenciaci√≥n Naturaleza', cost: 2, note: 'Especificar cu√°l' },
        { name: '+1 Potenciaci√≥n Concepto', cost: 2, note: 'Especificar cu√°l' }
    ],
    'Curaci√≥n y Restauraci√≥n': [
        { name: 'Curaci√≥n Menor (1d6+2)', cost: 1, note: 'Restaura Resistencia' },
        { name: 'Curaci√≥n (2d6+2)', cost: 2, note: 'Restaura Resistencia' },
        { name: 'Curaci√≥n Mayor (3d6+4)', cost: 3, note: 'Restaura Resistencia' },
        { name: 'Curaci√≥n Completa', cost: 5, note: 'Restaura toda Resistencia' }
    ],
    'Propiedades de Arma': [
        { name: 'Alcance Extendido', cost: 2, note: '+3m alcance' },
        { name: 'Retorno Autom√°tico', cost: 2, note: 'Arma vuelve' },
        { name: 'Vamp√≠rica', cost: 4, note: 'Recupera Resistencia' },
        { name: 'Penetraci√≥n de Armadura', cost: 3, note: 'Ignora 3 pts armadura' }
    ],
    'Propiedades de Armadura': [
        { name: 'Sin Penalizaci√≥n Sigilo', cost: 2, note: 'Elimina penalizaci√≥n' },
        { name: 'Resistencia a Tipo Da√±o', cost: 4, note: 'Mitad de da√±o' },
        { name: 'Inmunidad a Estado', cost: 3, note: 'Envenenado, Asustado, etc' },
        { name: 'Absorci√≥n', cost: 2, note: 'Ignora 1 pto da√±o' }
    ],
    'Movimiento y Sentidos': [
        { name: 'Pies Ligeros', cost: 2, note: 'Ignora terreno dif√≠cil' },
        { name: 'Vuelo Limitado', cost: 5, note: '18m, 1/d√≠a, 3 rondas' },
        { name: 'Visi√≥n en Oscuridad', cost: 2, note: 'Ver en oscuridad 15m' },
        { name: 'Sentidos Agudos', cost: 3, note: 'Ventaja en Percepci√≥n' }
    ],
    'Utilidad Social': [
        { name: 'Traductor Universal', cost: 3, note: 'Comprender idiomas' },
        { name: 'Presencia Intimidante', cost: 2, note: 'Ventaja intimidaci√≥n' },
        { name: 'Encanto Sutil', cost: 2, note: 'Ventaja persuasi√≥n' },
        { name: 'Detecci√≥n de Mentiras', cost: 3, note: 'Ventaja detectar enga√±os' }
    ]
};

const REQUIREMENTS = [
    { name: 'Sinton√≠a', cost: -1, desc: 'Descanso largo para activar' },
    { name: 'Herencia Espec√≠fica', cost: -2, desc: 'Solo una Herencia definida' },
    { name: 'Concepto Espec√≠fico', cost: -2, desc: 'Requiere Concepto' },
    { name: 'Atributo M√≠nimo', cost: -1, desc: 'Valor m√≠nimo requerido' },
    { name: 'Senda Espec√≠fica', cost: -2, desc: 'Solo una Senda definida' },
    { name: 'Personalidad', cost: -2, desc: 'Solo una Naturaleza definida' }
];

const CURSES = [
    { name: 'Menor', cost: 2, desc: 'Desventaja situacional, -1 Atributo, vulnerabilidad menor' },
    { name: 'Mayor', cost: 4, desc: 'Penalizaci√≥n -2 Atributo, vulnerabilidad mayor, adicci√≥n' },
    { name: 'Severa', cost: 6, desc: 'Transformaci√≥n gradual, precio de sangre, parasitismo' },
    { name: 'Legendaria', cost: 8, desc: 'P√©rdida de humanidad, posesi√≥n, condena divina' }
];

const CONSUMABLE_TYPES = {
    'Poci√≥n': { formula: (ppp) => ppp * 50, action: 'Acci√≥n R√°pida (beber)', icon: 'üß™' },
    'Pergamino': { formula: (ppp) => ppp * 75, action: 'Acci√≥n Principal + Salvaci√≥n', icon: 'üìú' },
    'Talism√°n': { formula: (ppp) => ppp * 60, action: 'Activaci√≥n autom√°tica', icon: '‚ú®' },
    'Aceite': { formula: (ppp) => ppp * 40, action: '1 minuto aplicar', icon: 'ü´ô' }
};const { useState } = React;

const ItemCreator = () => {
    const [activeTab, setActiveTab] = useState('objects');
    const [item, setItem] = useState({ 
        name: '', 
        rarity: 'Raro', 
        properties: [], 
        requirements: [], 
        curses: [] 
    });
    const [consumable, setConsumable] = useState({ 
        name: '', 
        type: 'Poci√≥n', 
        properties: [], 
        requirements: [],
        curses: [],
        quantity: 1 
    });
    const [selectedCategory, setSelectedCategory] = useState('');

    const calculatePPP = (data) => {
        const propsCost = data.properties.reduce((sum, p) => sum + p.cost, 0);
        const reqsCost = data.requirements.reduce((sum, r) => sum + r.cost, 0);
        const cursesCost = data.curses.reduce((sum, c) => sum + c.cost, 0);
        return propsCost + reqsCost + cursesCost;
    };

    const itemPPP = calculatePPP(item);
    const consumablePPP = calculatePPP(consumable);

    const addProperty = (prop, isConsumable = false) => {
        const setter = isConsumable ? setConsumable : setItem;
        setter(prev => ({
            ...prev,
            properties: [...prev.properties, { ...prop, id: Date.now() }]
        }));
    };

    const removeProperty = (id, isConsumable = false) => {
        const setter = isConsumable ? setConsumable : setItem;
        setter(prev => ({
            ...prev,
            properties: prev.properties.filter(p => p.id !== id)
        }));
    };

    const addRequirement = (req, isConsumable = false) => {
        const data = isConsumable ? consumable : item;
        const setter = isConsumable ? setConsumable : setItem;
        
        if (data.requirements.length >= 3) {
            alert('M√°ximo 3 requisitos permitidos');
            return;
        }
        
        setter(prev => ({
            ...prev,
            requirements: [...prev.requirements, { ...req, id: Date.now() }]
        }));
    };

    const removeRequirement = (id, isConsumable = false) => {
        const setter = isConsumable ? setConsumable : setItem;
        setter(prev => ({
            ...prev,
            requirements: prev.requirements.filter(r => r.id !== id)
        }));
    };

    const addCurse = (curse, isConsumable = false) => {
        const data = isConsumable ? consumable : item;
        const setter = isConsumable ? setConsumable : setItem;
        
        if (data.curses.length >= 2) {
            alert('M√°ximo 2 maldiciones permitidas');
            return;
        }
        
        setter(prev => ({
            ...prev,
            curses: [...prev.curses, { ...curse, id: Date.now(), details: '' }]
        }));
    };

    const removeCurse = (id, isConsumable = false) => {
        const setter = isConsumable ? setConsumable : setItem;
        setter(prev => ({
            ...prev,
            curses: prev.curses.filter(c => c.id !== id)
        }));
    };

    const updateCurseDetails = (id, details, isConsumable = false) => {
        const setter = isConsumable ? setConsumable : setItem;
        setter(prev => ({
            ...prev,
            curses: prev.curses.map(c => c.id === id ? { ...c, details } : c)
        }));
    };

    const getRarityFromPPP = (ppp) => {
        for (const [rarity, range] of Object.entries(RARITIES)) {
            if (ppp >= range.min && ppp <= range.max) return rarity;
        }
        return 'Fuera de rango';
    };

    const exportData = (isConsumable = false) => {
        if (isConsumable) {
            const typeData = CONSUMABLE_TYPES[consumable.type];
            const unitPrice = typeData.formula(consumablePPP);
            const text = `${consumable.type}: ${consumable.name}
Rareza Equivalente: ${getRarityFromPPP(consumablePPP)} (${consumablePPP} PPP)

EFECTOS:
${consumable.properties.map(p => `‚Ä¢ ${p.name} - ${p.note}`).join('\n')}

${consumable.requirements.length > 0 ? `REQUISITOS:\n${consumable.requirements.map(r => `‚Ä¢ ${r.name} (${r.cost} PPP) - ${r.desc}`).join('\n')}\n` : ''}
${consumable.curses.length > 0 ? `MALDICIONES:\n${consumable.curses.map(c => `‚Ä¢ Maldici√≥n ${c.name} (+${c.cost} PPP) - ${c.details || c.desc}`).join('\n')}\n` : ''}

Uso: ${typeData.action}

COSTE:
PPP Base: ${consumablePPP}
Precio Unitario: ${unitPrice} L
Cantidad: ${consumable.quantity}
Precio Total: ${unitPrice * consumable.quantity} L`;
            
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${consumable.name || 'consumible'}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        } else {
            const text = `${item.name}
Rareza: ${item.rarity} (${itemPPP} PPP)
Presupuesto: ${RARITIES[item.rarity].min}-${RARITIES[item.rarity].max} PPP
Precio Aproximado: ${RARITIES[item.rarity].price}

PROPIEDADES:
${item.properties.map(p => `‚Ä¢ ${p.name} (${p.cost} PPP) - ${p.note}`).join('\n')}

${item.requirements.length > 0 ? `REQUISITOS:\n${item.requirements.map(r => `‚Ä¢ ${r.name} (${r.cost} PPP) - ${r.desc}`).join('\n')}\n` : ''}
${item.curses.length > 0 ? `MALDICIONES:\n${item.curses.map(c => `‚Ä¢ Maldici√≥n ${c.name} (+${c.cost} PPP) - ${c.details || c.desc}`).join('\n')}\n` : ''}

Coste Total: ${itemPPP} PPP`;
            
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${item.name || 'objeto'}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }
    };

    return (
        <div className="min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 p-4">
            <div className="max-w-6xl mx-auto">
                <header className="bg-gradient-to-r from-amber-800 to-orange-700 text-white p-6 rounded-lg shadow-xl mb-6">
                    <div className="flex items-center gap-3 mb-4">
                        <BookIcon />
                        <div>
                            <h1 className="text-3xl font-bold">Creador de Objetos PAPA</h1>
                            <p className="text-amber-100">Sistema de PPP con Requisitos y Maldiciones</p>
                        </div>
                    </div>
                    
                    <div className="flex gap-2">
                        <button
                            onClick={() => setActiveTab('objects')}
                            className={`px-4 py-2 rounded-lg font-semibold transition-colors ${activeTab === 'objects' ? 'bg-white text-amber-800' : 'bg-amber-700 text-white hover:bg-amber-600'}`}
                        >
                            üìø Permanentes
                        </button>
                        <button
                            onClick={() => setActiveTab('consumables')}
                            className={`px-4 py-2 rounded-lg font-semibold transition-colors ${activeTab === 'consumables' ? 'bg-white text-amber-800' : 'bg-amber-700 text-white hover:bg-amber-600'}`}
                        >
                            üß™ Consumibles
                        </button>
                    </div>
                </header>

                {activeTab === 'consumables' ? (
                    <ConsumablesTab
                        consumable={consumable}
                        setConsumable={setConsumable}
                        consumablePPP={consumablePPP}
                        selectedCategory={selectedCategory}
                        setSelectedCategory={setSelectedCategory}
                        addProperty={addProperty}
                        removeProperty={removeProperty}
                        addRequirement={addRequirement}
                        removeRequirement={removeRequirement}
                        addCurse={addCurse}
                        removeCurse={removeCurse}
                        updateCurseDetails={updateCurseDetails}
                        getRarityFromPPP={getRarityFromPPP}
                        exportData={exportData}
                    />
                ) : (
                    <ObjectsTab
                        item={item}
                        setItem={setItem}
                        itemPPP={itemPPP}
                        selectedCategory={selectedCategory}
                        setSelectedCategory={setSelectedCategory}
                        addProperty={addProperty}
                        removeProperty={removeProperty}
                        addRequirement={addRequirement}
                        removeRequirement={removeRequirement}
                        addCurse={addCurse}
                        removeCurse={removeCurse}
                        updateCurseDetails={updateCurseDetails}
                        exportData={exportData}
                    />
                )}
            </div>
        </div>
    );
};

// Componente de Consumibles
const ConsumablesTab = ({ 
    consumable, setConsumable, consumablePPP, selectedCategory, setSelectedCategory,
    addProperty, removeProperty, addRequirement, removeRequirement,
    addCurse, removeCurse, updateCurseDetails, getRarityFromPPP, exportData
}) => {
    const typeData = CONSUMABLE_TYPES[consumable.type];
    const unitPrice = typeData.formula(consumablePPP);
    const totalPrice = unitPrice * consumable.quantity;

    return (
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div className="lg:col-span-2 space-y-4">
                {/* Info B√°sica */}
                <div className="bg-white rounded-lg shadow-lg p-6">
                    <h2 className="text-xl font-bold text-amber-900 mb-4">Informaci√≥n</h2>
                    <input
                        type="text"
                        value={consumable.name}
                        onChange={(e) => setConsumable(prev => ({ ...prev, name: e.target.value }))}
                        className="w-full px-3 py-2 border rounded-md mb-3"
                        placeholder="Nombre"
                    />
                    <select
                        value={consumable.type}
                        onChange={(e) => setConsumable(prev => ({ ...prev, type: e.target.value }))}
                        className="w-full px-3 py-2 border rounded-md"
                    >
                        {Object.entries(CONSUMABLE_TYPES).map(([type, data]) => (
                            <option key={type} value={type}>{data.icon} {type}</option>
                        ))}
                    </select>
                </div>

                {/* Propiedades */}
                <PropertySection
                    title="Efectos"
                    items={consumable.properties}
                    selectedCategory={selectedCategory}
                    setSelectedCategory={setSelectedCategory}
                    onAdd={(prop) => addProperty(prop, true)}
                    onRemove={(id) => removeProperty(id, true)}
                    colorClass="purple"
                />

                {/* Requisitos */}
                <RequirementSection
                    items={consumable.requirements}
                    onAdd={(req) => addRequirement(req, true)}
                    onRemove={(id) => removeRequirement(id, true)}
                />

                {/* Maldiciones */}
                <CurseSection
                    items={consumable.curses}
                    onAdd={(curse) => addCurse(curse, true)}
                    onRemove={(id) => removeCurse(id, true)}
                    onUpdateDetails={(id, details) => updateCurseDetails(id, details, true)}
                />

                {/* Cantidad */}
                <div className="bg-white rounded-lg shadow-lg p-6">
                    <h2 className="text-xl font-bold text-amber-900 mb-4">Cantidad</h2>
                    <div className="flex items-center gap-4">
                        <button
                            onClick={() => setConsumable(prev => ({ ...prev, quantity: Math.max(1, prev.quantity - 1) }))}
                            className="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-bold"
                        >-</button>
                        <input
                            type="number"
                            value={consumable.quantity}
                            onChange={(e) => setConsumable(prev => ({ ...prev, quantity: Math.max(1, parseInt(e.target.value) || 1) }))}
                            className="w-20 text-center text-2xl font-bold border rounded"
                        />
                        <button
                            onClick={() => setConsumable(prev => ({ ...prev, quantity: prev.quantity + 1 }))}
                            className="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-bold"
                        >+</button>
                    </div>
                </div>
            </div>

            {/* Resumen */}
            <div>
                <div className="bg-white rounded-lg shadow-lg p-6 sticky top-4">
                    <h2 className="text-xl font-bold text-amber-900 mb-4">Resumen</h2>
                    <div className="space-y-4">
                        <div className="bg-purple-50 p-4 rounded-lg">
                            <div className="text-sm text-gray-600">Tipo</div>
                            <div className="text-xl font-bold">{typeData.icon} {consumable.type}</div>
                        </div>
                        <div className="bg-amber-50 p-4 rounded-lg">
                            <div className="text-sm text-gray-600">Rareza</div>
                            <div className="text-lg font-bold">{getRarityFromPPP(consumablePPP)}</div>
                            <div className="text-xs text-gray-600">{consumablePPP} PPP</div>
                        </div>
                        <div className="space-y-2 text-sm">
                            <div className="flex justify-between">
                                <span>Propiedades:</span>
                                <span className="font-bold">
                                    {consumable.properties.reduce((s, p) => s + p.cost, 0)} PPP
                                </span>
                            </div>
                            <div className="flex justify-between">
                                <span>Requisitos:</span>
                                <span className="font-bold text-green-600">
                                    {consumable.requirements.reduce((s, r) => s + r.cost, 0)} PPP
                                </span>
                            </div>
                            <div className="flex justify-between">
                                <span>Maldiciones:</span>
                                <span className="font-bold text-purple-600">
                                    +{consumable.curses.reduce((s, c) => s + c.cost, 0)} PPP
                                </span>
                            </div>
                            <div className="flex justify-between pt-2 border-t">
                                <span>Precio Unit:</span>
                                <span className="font-bold">{unitPrice} L</span>
                            </div>
                            <div className="flex justify-between">
                                <span>Cantidad:</span>
                                <span className="font-bold">√ó{consumable.quantity}</span>
                            </div>
                            <div className="flex justify-between pt-2 border-t-2">
                                <span className="font-bold">TOTAL:</span>
                                <span className="text-2xl font-bold text-amber-900">{totalPrice} L</span>
                            </div>
                        </div>
                        <button
                            onClick={() => exportData(true)}
                            disabled={!consumable.name}
                            className="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 flex items-center justify-center gap-2"
                        >
                            <DownloadIcon />Exportar
                        </button>
                        <div className="bg-blue-50 p-3 rounded text-xs">
                            <div className="font-bold mb-1">üìã F√≥rmulas</div>
                            <div>Poci√≥n: PPP √ó 50 L</div>
                            <div>Pergamino: PPP √ó 75 L</div>
                            <div>Talism√°n: PPP √ó 60 L</div>
                            <div>Aceite: PPP √ó 40 L</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    );
};

// Componente de Objetos Permanentes
const ObjectsTab = ({ 
    item, setItem, itemPPP, selectedCategory, setSelectedCategory,
    addProperty, removeProperty, addRequirement, removeRequirement,
    addCurse, removeCurse, updateCurseDetails, exportData
}) => {
    const isValid = itemPPP >= RARITIES[item.rarity].min && itemPPP <= RARITIES[item.rarity].max;

    return (
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <div className="lg:col-span-2 space-y-4">
                {/* Info B√°sica */}
                <div className="bg-white rounded-lg shadow-lg p-6">
                    <h2 className="text-xl font-bold text-amber-900 mb-4">Informaci√≥n</h2>
                    <input
                        type="text"
                        value={item.name}
                        onChange={(e) => setItem(prev => ({ ...prev, name: e.target.value }))}
                        className="w-full px-3 py-2 border rounded-md mb-3"
                        placeholder="Nombre"
                    />
                    <select
                        value={item.rarity}
                        onChange={(e) => setItem(prev => ({ ...prev, rarity: e.target.value }))}
                        className="w-full px-3 py-2 border rounded-md"
                    >
                        {Object.keys(RARITIES).map(r => (
                            <option key={r} value={r}>{r}</option>
                        ))}
                    </select>
                </div>

                {/* Propiedades */}
                <PropertySection
                    title="Propiedades"
                    items={item.properties}
                    selectedCategory={selectedCategory}
                    setSelectedCategory={setSelectedCategory}
                    onAdd={(prop) => addProperty(prop, false)}
                    onRemove={(id) => removeProperty(id, false)}
                    colorClass="amber"
                />

                {/* Requisitos */}
                <RequirementSection
                    items={item.requirements}
                    onAdd={(req) => addRequirement(req, false)}
                    onRemove={(id) => removeRequirement(id, false)}
                />

                {/* Maldiciones */}
                <CurseSection
                    items={item.curses}
                    onAdd={(curse) => addCurse(curse, false)}
                    onRemove={(id) => removeCurse(id, false)}
                    onUpdateDetails={(id, details) => updateCurseDetails(id, details, false)}
                />
            </div>

            {/* Resumen */}
            <div>
                <div className="bg-white rounded-lg shadow-lg p-6 sticky top-4">
                    <h2 className="text-xl font-bold text-amber-900 mb-4">Resumen</h2>
                    <div className="space-y-4">
                        <div className="bg-amber-50 p-4 rounded-lg">
                            <div className="text-sm text-gray-600">Presupuesto {item.rarity}</div>
                            <div className="text-2xl font-bold">
                                {RARITIES[item.rarity].min}-{RARITIES[item.rarity].max} PPP
                            </div>
                        </div>
                        <div className={`p-4 rounded-lg ${isValid ? 'bg-green-100' : 'bg-red-100'}`}>
                            <div className="text-sm text-gray-600">Coste Total</div>
                            <div className={`text-3xl font-bold ${isValid ? 'text-green-700' : 'text-red-700'}`}>
                                {itemPPP} PPP
                            </div>
                        </div>
                        <div className="space-y-2 text-sm">
                            <div className="flex justify-between">
                                <span>Propiedades:</span>
                                <span className="font-bold">{item.properties.reduce((s, p) => s + p.cost, 0)} PPP</span>
                            </div>
                            <div className="flex justify-between">
                                <span>Requisitos:</span>
                                <span className="font-bold text-green-600">
                                    {item.requirements.reduce((s, r) => s + r.cost, 0)} PPP
                                </span>
                            </div>
                            <div className="flex justify-between">
                                <span>Maldiciones:</span>
                                <span className="font-bold text-purple-600">
                                    +{item.curses.reduce((s, c) => s + c.cost, 0)} PPP
                                </span>
                            </div>
                        </div>
                        <button
                            onClick={() => exportData(false)}
                            disabled={!item.name}
                            className="w-full bg-gradient-to-r from-amber-600 to-orange-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 flex items-center justify-center gap-2"
                        >
                            <DownloadIcon />Exportar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    );
};

// Componentes reutilizables
const PropertySection = ({ title, items, selectedCategory, setSelectedCategory, onAdd, onRemove, colorClass }) => (
    <div className="bg-white rounded-lg shadow-lg p-6">
        <h2 className="text-xl font-bold text-amber-900 mb-4">{title}</h2>
        <select
            value={selectedCategory}
            onChange={(e) => setSelectedCategory(e.target.value)}
            className="w-full px-3 py-2 border rounded-md mb-3"
        >
            <option value="">Seleccionar categor√≠a</option>
            {Object.keys(PROPERTIES).map(cat => (
                <option key={cat} value={cat}>{cat}</option>
            ))}
        </select>

        {selectedCategory && (
            <div className="space-y-2 mb-4 max-h-64 overflow-y-auto border rounded p-3">
                {PROPERTIES[selectedCategory].map((prop, idx) => (
                    <button
                        key={idx}
                        onClick={() => onAdd(prop)}
                        className="w-full text-left p-2 border rounded hover:bg-amber-50"
                    >
                        <div className="flex justify-between">
                            <div className="flex-1">
                                <div className="font-medium">{prop.name}</div>
                                <div className="text-xs text-gray-600">{prop.note}</div>
                            </div>
                            <span className={`bg-${colorClass}-600 text-white px-2 py-1 rounded text-sm font-bold ml-2`}>
                                {prop.cost} PPP
                            </span>
                        </div>
                    </button>
                ))}
            </div>
        )}

        <div className="space-y-2">
            {items.map(prop => (
                <div key={prop.id} className={`flex justify-between items-center bg-${colorClass}-50 p-3 rounded`}>
                    <div className="flex-1">
                        <div className="font-medium">{prop.name}</div>
                        <div className="text-xs text-gray-600">{prop.note}</div>
                    </div>
                    <div className="flex gap-2">
                        <span className={`bg-${colorClass}-600 text-white px-2 py-1 rounded text-sm font-bold`}>
                            {prop.cost} PPP
                        </span>
                        <button onClick={() => onRemove(prop.id)} className="text-red-600">
                            <Trash2Icon />
                        </button>
                    </div>
                </div>
            ))}
        </div>
    </div>
);

const RequirementSection = ({ items, onAdd, onRemove }) => (
    <div className="bg-white rounded-lg shadow-lg p-6">
        <h2 className="text-xl font-bold text-amber-900 mb-4">Requisitos (Reducen Coste)</h2>
        <p className="text-sm text-gray-600 mb-3">M√°ximo 3 requisitos</p>
        
        <div className="space-y-2 mb-4">
            {REQUIREMENTS.map((req, idx) => (
                <button
                    key={idx}
                    onClick={() => onAdd(req)}
                    className="w-full text-left p-2 border rounded hover:bg-green-50"
                >
                    <div className="flex justify-between">
                        <div className="flex-1">
                            <div className="font-medium">{req.name}</div>
                            <div className="text-xs text-gray-600">{req.desc}</div>
                        </div>
                        <span className="bg-green-600 text-white px-2 py-1 rounded text-sm font-bold ml-2">
                            {req.cost} PPP
                        </span>
                    </div>
                </button>
            ))}
        </div>

        <div className="space-y-2">
            {items.map(req => (
                <div key={req.id} className="flex justify-between items-center bg-green-50 p-3 rounded">
                    <div className="flex-1">
                        <div className="font-medium">{req.name}</div>
                        <div className="text-xs text-gray-600">{req.desc}</div>
                    </div>
                    <div className="flex gap-2">
                        <span className="bg-green-600 text-white px-2 py-1 rounded text-sm font-bold">
                            {req.cost} PPP
                        </span>
                        <button onClick={() => onRemove(req.id)} className="text-red-600">
                            <Trash2Icon />
                        </button>
                    </div>
                </div>
            ))}
        </div>
    </div>
);

const CurseSection = ({ items, onAdd, onRemove, onUpdateDetails }) => (
    <div className="bg-white rounded-lg shadow-lg p-6">
        <h2 className="text-xl font-bold text-amber-900 mb-4">Maldiciones (Aumentan Poder)</h2>
        <p className="text-sm text-gray-600 mb-3">M√°ximo 2 maldiciones</p>
        
        <div className="space-y-2 mb-4">
            {CURSES.map((curse, idx) => (
                <button
                    key={idx}
                    onClick={() => onAdd(curse)}
                    className="w-full text-left p-2 border rounded hover:bg-purple-50"
                >
                    <div className="flex justify-between">
                        <div className="flex-1">
                            <div className="font-medium">Maldici√≥n {curse.name}</div>
                            <div className="text-xs text-gray-600">{curse.desc}</div>
                        </div>
                        <span className="bg-purple-600 text-white px-2 py-1 rounded text-sm font-bold ml-2">
                            +{curse.cost} PPP
                        </span>
                    </div>
                </button>
            ))}
        </div>

        <div className="space-y-2">
            {items.map(curse => (
                <div key={curse.id} className="bg-purple-50 p-3 rounded">
                    <div className="flex justify-between mb-2">
                        <div className="font-medium">Maldici√≥n {curse.name}</div>
                        <div className="flex gap-2">
                            <span className="bg-purple-600 text-white px-2 py-1 rounded text-sm font-bold">
                                +{curse.cost} PPP
                            </span>
                            <button onClick={() => onRemove(curse.id)} className="text-red-600">
                                <Trash2Icon />
                            </button>
                        </div>
                    </div>
                    <textarea
                        value={curse.details}
                        onChange={(e) => onUpdateDetails(curse.id, e.target.value)}
                        placeholder="Describe los detalles espec√≠ficos..."
                        className="w-full px-3 py-2 border rounded text-sm"
                        rows="2"
                    />
                </div>
            ))}
        </div>
    </div>
);

// Renderizar la aplicaci√≥n
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<ItemCreator />);
```

---

## üìÅ Estructura final:
```
tu-repositorio/
‚îú‚îÄ‚îÄ index.html    (estructura HTML b√°sica)
‚îú‚îÄ‚îÄ data.js       (datos: propiedades, requisitos, maldiciones)
‚îî‚îÄ‚îÄ app.js        (l√≥gica completa de la aplicaci√≥n)
